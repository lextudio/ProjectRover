<UserControl x:Class="ProjectRover.Views.AssemblyListPane"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:nodes="clr-namespace:ProjectRover.Nodes"
             xmlns:searchResults="clr-namespace:ProjectRover.SearchResults"
             xmlns:vm="using:ProjectRover.ViewModels"
             xmlns:converters="clr-namespace:ProjectRover.Converters"
             x:DataType="vm:MainWindowViewModel">
  <TreeView x:Name="TreeView"
            ItemsSource="{Binding AssemblyNodes}"
            SelectionMode="Single"
            SelectedItem="{Binding SelectedNode}"
            AutoScrollToSelectedItem="True"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
            Foreground="{DynamicResource ThemeForegroundBrush}">
    <TreeView.Styles>
      <Style Selector="TextBlock" x:DataType="nodes:Node">
        <Setter Property="Foreground" Value="{Binding IsPublicAPI, Converter={StaticResource ApiVisibilityToBrushConverter}}" />
      </Style>
      <Style Selector="Svg">
        <Setter Property="Margin" Value="0 0 5 0" />
      </Style>
      <Style Selector="TreeViewItem" x:DataType="nodes:Node">
        <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
      </Style>
    </TreeView.Styles>

    <TreeView.DataTemplates>
      <TreeDataTemplate DataType="nodes:AssemblyNode" ItemsSource="{Binding Children}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ReferenceIcon}" />
          <TextBlock Text="{Binding Name}"
                     Foreground="{DynamicResource ThemeForegroundBrush}" />
        </StackPanel>
      </TreeDataTemplate>
      <TreeDataTemplate DataType="nodes:MetadataNode" ItemsSource="{Binding Items}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource MetadataIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>
      <TreeDataTemplate DataType="nodes:DebugMetadataNode" ItemsSource="{Binding Items}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource MetadataIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>
      <TreeDataTemplate DataType="nodes:NamespaceNode" ItemsSource="{Binding Types}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource NamespaceIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>

      <TreeDataTemplate DataType="nodes:TypeNode" ItemsSource="{Binding Members}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ClassIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>

      <TreeDataTemplate DataType="nodes:MemberNode">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource MemberIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>

      <TreeDataTemplate DataType="nodes:ResourcesNode" ItemsSource="{Binding Items}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ResourcesIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>

      <TreeDataTemplate DataType="nodes:ResourceEntryNode" ItemsSource="{Binding Children}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{Binding IconKey, Converter={StaticResource IconKeyToPathConverter}}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>

      <TreeDataTemplate DataType="nodes:ReferencesNode" ItemsSource="{Binding Items}">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ReferenceIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>
      <TreeDataTemplate DataType="nodes:ResolvedReferenceNode">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ReferenceIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>
      <TreeDataTemplate DataType="nodes:UnresolvedReferenceNode">
        <StackPanel Orientation="Horizontal">
          <Svg Path="{DynamicResource ReferenceIcon}" />
          <TextBlock Text="{Binding Name}" />
        </StackPanel>
      </TreeDataTemplate>
    </TreeView.DataTemplates>
  </TreeView>
</UserControl>
